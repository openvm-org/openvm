[package]
name = "axvm-native-recursion"
version.workspace = true
authors.workspace = true
edition.workspace = true

[dependencies]
ax-stark-backend = { workspace = true }
axvm-native-circuit = { workspace = true }
axvm-native-compiler = { workspace = true }
axvm-native-compiler-derive = { workspace = true }
ax-stark-sdk = { workspace = true }
axvm-circuit = { workspace = true }
ax-circuit-primitives = { workspace = true }

p3-field = { workspace = true }
p3-commit = { workspace = true }
p3-dft = { workspace = true }
p3-fri = { workspace = true }
p3-matrix = { workspace = true }
p3-util = { workspace = true }
p3-symmetric = { workspace = true }
p3-challenger = { workspace = true }
p3-bn254-fr = { workspace = true }
p3-baby-bear = { workspace = true }
p3-merkle-tree = { workspace = true }
zkhash = { workspace = true }
snark-verifier-sdk = { workspace = true, features = [
    "loader_evm",
    "revm",
], optional = true }
ff = { workspace = true, features = ["derive", "derive_bits"] }
itertools.workspace = true
rand.workspace = true
serde.workspace = true
serde_json.workspace = true
tracing.workspace = true
lazy_static.workspace = true
once_cell = { workspace = true, optional = true }
metrics = { workspace = true, optional = true }
cfg-if = { workspace = true }

[dev-dependencies]
ax-circuit-primitives.workspace = true
axvm-native-recursion = { workspace = true, features = ["test-utils"] }

[features]
default = ["parallel", "mimalloc"]
parallel = ["ax-stark-backend/parallel"]
static-verifier = [
    "axvm-native-compiler/halo2-compiler",
    "dep:snark-verifier-sdk",
    "dep:once_cell",
]
test-utils = ["axvm-circuit/test-utils"]
bench-metrics = ["dep:metrics", "axvm-circuit/bench-metrics"]
mimalloc = ["ax-stark-backend/mimalloc"]
jemalloc = ["ax-stark-backend/jemalloc"]
nightly-features = ["axvm-circuit/nightly-features"]
