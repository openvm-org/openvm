# Install

To use OpenVM for generating proofs, you must install the OpenVM command line tool `cargo-openvm`
either via Git URL or by cloning the repo and building from source manually. Prior to either
approach, you should make sure you have installed the necessary [Prerequisites](#installation-prerequisites).

Skip [below](#installation-with-nvidia-gpu-support) for instructions on installing `cargo-openvm` with Nvidia GPU support.

## Installation

### Option 1: Install Via Git URL (Recommended)

Begin the installation:

```bash
cargo +1.86 install --locked --git https://github.com/openvm-org/openvm.git --tag v1.4.0-rc.8 cargo-openvm
```

This will globally install `cargo-openvm`. You can validate a successful installation with:

```bash
cargo openvm --version
```

### Option 2: Build from source

To build from source, clone the repository and begin the installation.

```bash
git clone --branch v1.4.0-rc.8 --single-branch https://github.com/openvm-org/openvm.git
cd openvm
cargo install --locked --force --path crates/cli
```

This will globally install `cargo-openvm`. You can validate a successful installation with:

```bash
cargo openvm --version
```

### Installation Prerequisites

Prior to installing `cargo-openvm`, make sure you have the following packages installed:

:::code-group

```bash [Ubuntu]
# install Rust
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
. "$HOME/.cargo/env"

# install nightly Rust toolchain for binary builds
rustup install nightly-2025-02-14
rustup component add rust-src --toolchain nightly-2025-02-14

# install build tools for Ubuntu
sudo apt update
sudo apt install -y build-essential   # gcc, g++, make, libc headers

# install Solidity compiler, only needed for EVM proofs
cargo install --version 0.5.7 svm-rs
# Add the binary to your path
export PATH="$HOME/.cargo/bin:$PATH"

# Install solc 0.8.19
svm install 0.8.19
```

```bash [macOS]
# install Rust
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
. "$HOME/.cargo/env"

# install nightly Rust toolchain for binary builds
rustup install nightly-2025-02-14
rustup component add rust-src --toolchain nightly-2025-02-14

# install build tools for macOS
xcode-select --install
brew install cmake git curl

# install Solidity compiler, only needed for EVM proofs
cargo install --version 0.5.7 svm-rs
# Add the binary to your path
export PATH="$HOME/.cargo/bin:$PATH"

# Install solc 0.8.19
svm install 0.8.19
svm use 0.8.19
```

:::

## Installation with Nvidia GPU support

It is possible to install the OpenVM CLI with support for Nvidia GPUs. This requires installation on a machine with an Nvidia GPU and associated drivers (see [Prerequisites (CUDA)](#installation-prerequisites-cuda))

With this version of the CLI, the `prove app` and `prove stark` commands will utilize the Nvidia GPU for hardware acceleration. Currently only single GPU support is available through the CLI.


### Option 1: Install Via Git URL (Recommended)

Begin the installation:

```bash
cargo +1.86 install --locked --git https://github.com/openvm-org/openvm.git --tag v1.4.0-rc.8 --features cuda cargo-openvm
```

This will globally install `cargo-openvm`. You can validate a successful installation with:

```bash
cargo openvm --version
```

### Option 2: Build from source

To build from source, clone the repository and begin the installation.

```bash
git clone --branch v1.4.0-rc.8 --single-branch https://github.com/openvm-org/openvm.git
cd openvm
cargo install --locked --force --path crates/cli --features cuda
```

This will globally install `cargo-openvm`. You can validate a successful installation with:

```bash
cargo openvm --version
```

### Installation Prerequisites (CUDA)

You will need all of the [Common Prerequisites](#installation-prerequisites). In addition, you will need to have a machine with
- Nvidia GPU drivers [installed](https://docs.nvidia.com/datacenter/tesla/driver-installation-guide/index.html#)
- CUDA toolkit [installed](https://docs.nvidia.com/cuda/cuda-installation-guide-linux/#)

For machines running Ubuntu 24.04, you can install Nvidia drivers using

```bash [Ubuntu 24.04]
wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2404/x86_64/cuda-keyring_1.1-1_all.deb
sudo dpkg -i cuda-keyring_1.1-1_all.deb
sudo apt-get update

sudo apt-get install -y cuda-drivers
```

To check that CUDA drivers are installed, run
```bash
nvidia-smi
```

CUDA toolkit can be installed using the following command, assuming the keyring above has already been installed:

```bash [Ubuntu 24.04]
sudo apt-get install -y cuda-toolkit
export PATH="/usr/local/cuda/bin:$PATH"
```

To check that CUDA toolkit is installed, run
```bash
nvcc --version
```

The OpenVM CLI has been tested with CUDA toolkit version 12.8, and we recommend using CUDA toolkit version 12.8 or higher.

Post-installation, ensure that you set the proper [path variables for CUDA](https://docs.nvidia.com/cuda/cuda-installation-guide-linux/#environment-setup):
```bash
export LD_LIBRARY_PATH=/usr/local/cuda/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}
```
Note that `/usr/local/cuda` is a symlink for the latest version of CUDA installed.

You are now ready to [install](#install-with-nvidia-gpu-support) the OpenVM CLI.
